<html lang="en"><head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Process Monitor</title>
    <meta content="" name="descriptison">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="../assets/img/favicon.png" rel="icon">
    <link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/vendor/icofont/icofont.min.css" rel="stylesheet">
    <link href="../assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="../assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="../assets/vendor/venobox/venobox.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/vendor/highlight/dark.min.css">
    <script src="../assets/vendor/highlight/highlight.min.js"></script>
    <!-- Template Main CSS File -->
    <link href="../assets/css/style.css" rel="stylesheet">
</head>

<body data-gr-c-s-loaded="true">
<!-- ======= Portfolio Details ======= -->
  <main id="main">
    <div id="portfolio-details" class="portfolio-details">
      <div class="container">

        <div class="row">

          <div class="col-lg-12 col-12 portfolio-info">
            <br>
			<div class="col-lg-12 col-12"><h2 class="project-name">Process Monitor</h2></div>
            
			<div class="col-md-12 col-12 project-body">
				<div class="col-md-6 col-12 project-stack"> 
					<ul>
					  <li><strong>Project Type</strong>: Personal</li>
					  <li><strong>Language</strong>: Rust</li>
					  <li><strong>Website URL</strong>: <a href="https://github.com/Euna-Islam/process-monitor" target="_blank">Link</a></li>
					  <li>
					  <strong>Features:</strong>
						<ul>
						    <li>
							Read system information
							</li>
							<li>
							Read the process list
							</li>
							<li>
							Sort process by memory and CPU usage
							</li>
							<li>
							Build with powershell script
							</li>
						</ul>
					  </li>
					</ul>
				</div>
				
				<div class="col-md-6 col-12 project-pic"> 
					<a href="https://github.com/Euna-Islam/process-monitor" target="_blank">
						<img src="../assets/img/project/process-manager.png" class="img-fluid" alt="">
					</a>
				</div>
			</div>
			
			

            <!-- <p>
               The blog is created using flask as backend. I have used bootstrap for the frontend part. For storing the data, I have made use of MySQL database. I have used the python SQL toolkit SQLAlchemy for performing database access.
            </p>
            <p>
                The blog consist of features like viewing posts. Admin can add new post, edit posts and delete posts. User can contact admin via the contact page.
            </p> -->
          </div>
		  
		<div class="col-lg-12 col-12 portfolio-info">
            <br>
			<div class="col-md-12 col-12 project-body"><h2 class="project-name">Code Sample</h2></div>
			<p>
			<strong>Check out the project code: </strong>: <a href="https://github.com/Euna-Islam/process-monitor/" target="_blank">Process Monitor</a>
			</p>
            <button onclick="toggleDiv()"  class="code-button">&lt;/&gt; Code Snippet: Fetching system data using external crate and structuring the data</button>
			<div id="expandableDiv" class="col-md-12 col-12 project-body code-sample" style="display: none;">	
				
                <div class=" text-left">
                    <pre>
                    <code class="text-left language-cs language-c-sharp">
/* SPDX-License-Identifier: Apache-2.0 */

//import external crate for system information
extern crate sysinfo;

//import custom struct ProcessInfo
use crate::models::process_info::ProcessInfo;

//import needed traits from external crate sysinfo
use sysinfo::{ProcessExt, System, SystemExt};

/*
*Get process information
*Map it to Vector of ProcessInfo
*/
pub fn get_process_info() -> Vec<ProcessInfo>
{
let mut sys = System::new_all();
//refreshing twice for accurate data about CPU
sys.refresh_all();
sys.refresh_all();
let process_list: Vec<ProcessInfo>
    = sys
    .processes()
    .iter()
    .map(|(pid, process)| ProcessInfo {
    name: process.name().to_string(),
    id: pid.to_string(),
    cpu_usage: process.cpu_usage().to_string(),
    status: process.status().to_string(),
    memory_usage: process.memory().to_string(),
    })
    .collect();

    process_list
    }

/*
* get process info
* sort them by memory usage
*/
pub fn sort_by_memory() -> Vec<ProcessInfo>
{
let mut process_list: Vec<ProcessInfo> = get_process_info();

process_list.sort_by(|a, b| {
    let mem1 = a.memory_usage.parse::<u64>
    ().unwrap_or(0);
    let mem2 = b.memory_usage.parse::<u64>
    ().unwrap_or(0);
    mem2.cmp(&mem1)
    });

process_list
}

/*
* get process info
* sort them by cpu usage
*/
pub fn sort_by_cpu_usage() -> Vec<ProcessInfo>
{
    let mut process_list: Vec<ProcessInfo>
        = get_process_info();

    process_list.sort_by(|a, b| {
    let cpu1 = a.cpu_usage.parse::<u64>
        ().unwrap_or(0);
        let cpu2 = b.cpu_usage.parse::<u64>
            ().unwrap_or(0);
            cpu2.cmp(&cpu1)
            });

    process_list
}
                        </code>
                    </pre>
                </div>
				
			</div>
        </div>

        </div>

      </div>
    </div><!-- End Portfolio Details -->
	
  </main><!-- End #main -->
<script>
    function toggleDiv() {
      var div = document.getElementById("expandableDiv");
      if (div.style.display === "none") {
        div.style.display = "block";
        div.style.height = div.scrollHeight + "px"; // Expanding to the full height
      } else {
        div.style.display = "none";
        div.style.height = "0";
        }
        hljs.highlightAll();
    }
  </script>

</body>
</html>